/*! SuperSimpleSim v1.0.1 - 2014-05-24 12:05:10 
Vince Allen |Brooklyn, NY | vince@vinceallen.com | @vinceallenvince | License: MIT */
!function(a,b){function c(a){var b=a||{};this.world=document.body,this.name=b.name||"Item",this.id=this.name+c._idCount,this.el=document.createElement("div"),this.el.id=this.id,this.el.className="item "+this.name.toLowerCase(),this.world.appendChild(this.el),c._idCount++}function d(a,b){var c=a||0,d=b||0;this.x=c,this.y=d}b.SuperSimpleSim=a,c._idCount=0,c.prototype.init=function(b){var c,d=b||{};for(c in d)d.hasOwnProperty(c)&&(this[c]=d[c]);this.width="undefined"==typeof d.width?10:d.width,this.height="undefined"==typeof d.height?10:d.height,this.scale=d.scale||1,this.angle=d.angle||0,this.color=d.color||[0,0,0],this.mass="undefined"==typeof d.mass?10:d.mass,this.acceleration=d.acceleration||new a.Vector,this.velocity=d.velocity||new a.Vector,this.location=d.location||new a.Vector(this.world.scrollWidth/2,this.world.scrollHeight/2),this.maxSpeed="undefined"==typeof d.maxSpeed?10:d.maxSpeed,this.minSpeed=d.minSpeed||0,this.bounciness=d.bounciness||.5,this._force=new a.Vector,this.checkWorldEdges="undefined"==typeof d.checkWorldEdges?!0:d.checkWorldEdges,this.color[0]=parseInt(this.color[0],10),this.color[1]=parseInt(this.color[1],10),this.color[2]=parseInt(this.color[2],10)},c.prototype.step=function(){this.applyForce(a.System.gravity),this.applyForce(a.System.wind),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,this.minSpeed),this.location.add(this.velocity),this.checkWorldEdges?this._checkWorldEdges():this._wrapWorldEdges(),this.acceleration.mult(0)},c.prototype.applyForce=function(a){return a?(this._force.x=a.x,this._force.y=a.y,this._force.div(this.mass),this.acceleration.add(this._force),this.acceleration):void 0},c.prototype._checkWorldEdges=function(){var a=this.world.scrollWidth,b=this.world.scrollHeight,c=this.location,d=this.velocity,e=this.width,f=this.height,g=this.bounciness;c.x+e/2>a?(c.x=a-e/2,d.x*=-1*g):c.x<e/2&&(c.x=e/2,d.x*=-1*g),c.y+f/2>b?(c.y=b-f/2,d.y*=-1*g):c.y<f/2&&(c.y=f/2,d.y*=-1*g)},c.prototype._wrapWorldEdges=function(){var a=this.world.scrollWidth,b=this.world.scrollHeight,c=this.location,d=this.width,e=this.height;c.x+d/2>a?c.x=d/2:c.x<d/2&&(c.x=a-d/2),c.y+e/2>b?c.y=e/2:c.y<e/2&&(c.y=b-e/2)},c.prototype.draw=function(){a.System._draw(this)};var e={name:"System"};e.Classes={},e.gravity={},e.wind={},e._stylePosition="transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -webkit-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -moz-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -o-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -ms-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>);",e._records=[],e.setup=function(b){this.gravity=new a.Vector(0,1),this.wind=new a.Vector(0,0),b.call(this)},e.add=function(b,c){var d=this._records;SuperSimpleSim[b]?d.push(new SuperSimpleSim[b]):SuperSimpleSim.System.Classes[b]?d.push(new SuperSimpleSim.System.Classes[b](c)):d.push(new a.Item),d[d.length-1].init(c)},e.loop=function(){var a,b=e._records,c=e._records.length;for(a=c-1;a>=0;a-=1)b[a].step();for(a=c-1;a>=0;a-=1)b[a].draw();window.requestAnimFrame(e.loop)},e._draw=function(a){var b=this.getCSSText({x:a.location.x-a.width/2,y:a.location.y-a.height/2,angle:a.angle,scale:a.scale||1,width:a.width,height:a.height,color0:a.color[0],color1:a.color[1],color2:a.color[2]});a.el.style.cssText=b},e.getCSSText=function(a){return this._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: rgb("+a.color0+", "+a.color1+", "+a.color2+")"},e.extend=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},e.getRandomNumber=function(a,b,c){return c?Math.random()*(b-(a-1))+a:Math.floor(Math.random()*(b-(a-1)))+a},e.map=function(a,b,c,d,e){var f=(a-b)/(c-b);return f*(e-d)+d},d.VectorSub=function(a,b){return new d(a.x-b.x,a.y-b.y)},d.VectorAdd=function(a,b){return new d(a.x+b.x,a.y+b.y)},d.VectorMult=function(a,b){return new d(a.x*b,a.y*b)},d.VectorDiv=function(a,b){return new d(a.x/b,a.y/b)},d.VectorDistance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},d.VectorMidPoint=function(a,b){return d.VectorAdd(a,b).div(2)},d.VectorAngleBetween=function(a,b){var c=a.dot(b),d=Math.acos(c/(a.mag()*b.mag()));return d},d.prototype.name="Vector",d.prototype.clone=function(){function a(){}return a.prototype=this,new a},d.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},d.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},d.prototype.mult=function(a){return this.x*=a,this.y*=a,this},d.prototype.div=function(a){return this.x=this.x/a,this.y=this.y/a,this},d.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},d.prototype.limit=function(a,b){var c=a||null,d=b||null;return c&&this.mag()>c&&(this.normalize(),this.mult(c)),d&&this.mag()<d&&(this.normalize(),this.mult(d)),this},d.prototype.normalize=function(){var a=this.mag();return 0!==a?this.div(a):void 0},d.prototype.distance=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))},d.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.x,e=this.y;return this.x=d*b-e*c,this.y=d*c+e*b,this},d.prototype.midpoint=function(a){return d.VectorAdd(this,a).div(2)},d.prototype.dot=function(a){return this.z&&a.z?this.x*a.x+this.y*a.y+this.z*a.z:this.x*a.x+this.y*a.y},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),a.Item=c,a.System=e,a.Vector=d}({},function(){return this}());